<!DOCTYPE html>
<html>
  <head>
    <title>Test</title>
  </head>
  
  <body>
    <form>
      <input type="button" id="sendToServer" value="Send to server"> 
    </form>
    <p id="time"></p>
  </body>
  
  <script>
      let webSocket = new WebSocket(location.origin.replace(/^http/, 'ws'));
      let serverTime;

      webSocket.onopen = () => {
        webSocket.send('Hi there :)');
      };

      webSocket.onmessage = (event) => {
        serverTime = document.querySelector('#time');
        serverTime.innerHTML = 'Current time on server is: ' + event.data;
      };
      
      //webSocket.addEventListener('open', (event) => {
      //webSocket.send('Hello Server!');
      //});
      
      function sendMsg(msg) {
        webSocket.send(msg);
      }

      document
        .querySelector('#sendToServer')
        .addEventListener('click', function () {
          sendMsg("Hello server!");
        })
    </script>
    
</html>
